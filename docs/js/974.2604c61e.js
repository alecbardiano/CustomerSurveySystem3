"use strict";(self["webpackChunkcustomersurveysystem3"]=self["webpackChunkcustomersurveysystem3"]||[]).push([[974],{37974:(e,a,l)=>{l.r(a),l.d(a,{default:()=>K});var t=l(83673),o=l(62323);const s=e=>((0,t.dD)("data-v-ebd7450e"),e=e(),(0,t.Cn)(),e),i={class:"row justify-center items-left"},n=s((()=>(0,t._)("h5",null,"Please provide a action plan for the negative feedback given by the Client",-1))),u={style:{"max-height":"500px",overflow:"auto"},class:"col"},r={visible:!1,class:"fit column"},c={class:"row"},d={class:"questions"},m={class:"row"},p={class:"input"},f=(0,t.Uk)(" Feedback Rating: "),v={key:0,class:"q-ml-sm",style:{color:"#ffae42"}},w={key:1,class:"q-ml-sm",style:{color:"red"}},b={class:"row"},y={class:"input"},_={class:"row"},g={class:"input"},q={class:"row justify-end"},k=s((()=>(0,t._)("div",{class:"text-h6"},"Confirm Action Plan",-1))),h=s((()=>(0,t._)("span",{class:"q-ml-sm"},"Are you sure you want to continue with the action plan/s you provided?",-1)));function C(e,a,l,s,C,Z){const W=(0,t.up)("q-toolbar-title"),Q=(0,t.up)("q-toolbar"),H=(0,t.up)("q-header"),A=(0,t.up)("q-input"),F=(0,t.up)("q-btn"),V=(0,t.up)("q-card-section"),R=(0,t.up)("q-avatar"),S=(0,t.up)("q-card-actions"),D=(0,t.up)("q-card"),P=(0,t.up)("q-dialog"),x=(0,t.up)("q-form"),j=(0,t.up)("q-page"),z=(0,t.up)("q-page-container"),T=(0,t.up)("q-layout"),U=(0,t.Q2)("close-popup");return(0,t.wg)(),(0,t.j4)(T,{view:"hHh lpR fFf",class:"shadow-2 rounded-borders"},{default:(0,t.w5)((()=>[(0,t.Wm)(H,{reveal:"",class:"bg-primary"},{default:(0,t.w5)((()=>[(0,t.Wm)(Q,null,{default:(0,t.w5)((()=>[(0,t.Wm)(W,null,{default:(0,t.w5)((()=>[(0,t.Uk)("Action Plan for "+(0,o.zw)(e.tsrNumberView),1)])),_:1})])),_:1})])),_:1}),(0,t.Wm)(z,null,{default:(0,t.w5)((()=>[(0,t.Wm)(j,{class:"q-pa-md"},{default:(0,t.w5)((()=>[(0,t._)("div",i,[(0,t.Wm)(x,{onSubmit:e.onSubmit,class:"q-gutter-md",ref:"feedbackRefForm"},{default:(0,t.w5)((()=>[n,(0,t._)("div",u,[(0,t._)("div",r,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.questionList,((a,l)=>((0,t.wg)(),(0,t.iD)("div",{key:a.id},[(0,t._)("div",c,[(0,t._)("p",d,(0,o.zw)(l+1)+". "+(0,o.zw)(a.description)+":",1)]),(0,t._)("div",m,[(0,t._)("p",p,[f,2==e.resolutionAns[l].value?((0,t.wg)(),(0,t.iD)("span",v," Fair ")):((0,t.wg)(),(0,t.iD)("span",w," Poor "))])]),(0,t._)("div",b,[(0,t._)("p",y," Comment/Remarks: "+(0,o.zw)(e.resolutionAns[l].remarks),1)]),(0,t._)("div",_,[(0,t._)("div",g,[(0,t.Wm)(A,{outlined:"","stack-label":"",modelValue:e.resolutionAns[l].resolution,"onUpdate:modelValue":a=>e.resolutionAns[l].resolution=a,"lazy-rules":"",rules:[e=>!!e||"Field is required"],label:"Resolution"},null,8,["modelValue","onUpdate:modelValue","rules"])])])])))),128))])]),(0,t._)("div",q,[(0,t.wy)((0,t.Wm)(F,{label:"Submit",onClick:a[0]||(a[0]=a=>e.confirm=!0),class:"btn-sucess justify-right",color:"primary"},null,512),[[U]])]),(0,t.Wm)(P,{modelValue:e.confirm,"onUpdate:modelValue":a[1]||(a[1]=a=>e.confirm=a),persistent:""},{default:(0,t.w5)((()=>[(0,t.Wm)(D,null,{default:(0,t.w5)((()=>[(0,t.Wm)(V,{class:"bg-primary text-white"},{default:(0,t.w5)((()=>[k])),_:1}),(0,t.Wm)(V,{class:"row items-center"},{default:(0,t.w5)((()=>[(0,t.Wm)(R,{icon:"check_circle",color:"primary","text-color":"white"}),h])),_:1}),(0,t.Wm)(S,{align:"right"},{default:(0,t.w5)((()=>[(0,t.wy)((0,t.Wm)(F,{flat:"",label:"Cancel",color:"primary"},null,512),[[U]]),(0,t.wy)((0,t.Wm)(F,{flat:"",onClick:e.onSubmit,label:"Confrim",color:"primary"},null,8,["onClick"]),[[U]])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1},8,["onSubmit"])])])),_:1})])),_:1})])),_:1})}var Z=l(61959),W=l(26873),Q=(l(12841),l(48825)),H=l(79582);const A=(0,t.aZ)({name:"ResolutionFromFeedback",setup(){const e=(0,Z.iH)(null),a=(0,Z.iH)([]),l=(0,Q.Z)(),o=(0,Z.iH)(null),s=(0,Z.iH)({tsr:{tsrNo:""},id:"",value:[],questions:{}}),i=(0,Z.iH)([]),n=(0,Z.Fl)((()=>s.value.tsr.tsrNo)),u=(0,Z.iH)(!1);let r;const c=(0,Z.iH)([]);(0,t.Jd)((()=>{void 0!==r&&(clearTimeout(r),l.loading.hide())}));const d=(0,H.yj)(),m=(0,Z.iH)(d.params.id);function p(e){let a=e.map((e=>({ansID:e.id,resolution:"",value:e.value,remarks:e.remarks})));return a}async function f(e){return await(0,W.uC)(e)}async function v(){let a=await e.value.validate();if(a){await w()}else l.notify({message:"Please check required fields ",color:"negative",icon:"failed"})}async function w(){let e=await(0,W.wp)(c.value);(e=200)?l.notify({message:"Resolution Submitted for this TSR",color:"positive",icon:"success"}):l.notify({message:"Error upon submitting resolution",color:"negative",icon:"failed"})}function b(){c.value=p(i.value)}return console.debug(`current route name on component setup init: ${d}`),(0,t.bv)((async()=>{i.value=await f(m.value),s.value=i.value[0],a.value=i.value.map((e=>e.question)),b()})),{onSubmit:v,feedbackRefForm:e,tsrNumberView:n,textVal:o,answer:s,route:d,tsrID:m,answers:i,questionList:a,resolutionAns:c,confirm:u}}});var F=l(83066),V=l(53812),R=l(39570),S=l(13747),D=l(72652),P=l(24379),x=l(68689),j=l(64689),z=l(2165),T=l(46778),U=l(10151),I=l(25589),N=l(75096),L=l(99367),B=l(60677),E=l(7518),J=l.n(E);A.render=C,A.__scopeId="data-v-ebd7450e";const K=A;J()(A,"components",{QLayout:F.Z,QHeader:V.Z,QToolbar:R.Z,QToolbarTitle:S.Z,QPageContainer:D.Z,QPage:P.Z,QForm:x.Z,QInput:j.Z,QBtn:z.Z,QDialog:T.Z,QCard:U.Z,QCardSection:I.Z,QAvatar:N.Z,QCardActions:L.Z}),J()(A,"directives",{ClosePopup:B.Z})}}]);