"use strict";(self["webpackChunkcustomersurveysystem3"]=self["webpackChunkcustomersurveysystem3"]||[]).push([[694],{45694:(e,l,a)=>{a.r(l),a.d(l,{default:()=>U});var t=a(83673);const i={class:"q-pa-md"},o={key:0,class:"q-pa-md",style:{"margin-left":"40px"}},s={class:"row inline"},n={class:"row",style:{"padding-top":"20px"}},u={class:"row inline"},r={class:"row items-center justify-end"},d={class:"row items-center justify-end"},m={class:"q-pa-md"};function p(e,l,a,p,v,c){const f=(0,t.up)("q-toggle"),w=(0,t.up)("q-select"),b=(0,t.up)("q-btn"),g=(0,t.up)("q-date"),h=(0,t.up)("q-popup-proxy"),y=(0,t.up)("q-icon"),D=(0,t.up)("q-input"),V=(0,t.up)("q-form"),W=(0,t.up)("q-option-group"),q=(0,t.up)("q-table"),k=(0,t.Q2)("close-popup");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t._)("div",i,[(0,t.Wm)(f,{modelValue:e.showFilter,"onUpdate:modelValue":l[0]||(l[0]=l=>e.showFilter=l),label:"Show Filters"},null,8,["modelValue"])]),e.showFilter?((0,t.wg)(),(0,t.iD)("div",o,[(0,t._)("div",s,[(0,t.Wm)(w,{modelValue:e.division,"onUpdate:modelValue":[l[1]||(l[1]=l=>e.division=l),l[2]||(l[2]=l=>e.fillSectionList())],options:e.divisions,label:"Division",style:{width:"200px"}},null,8,["modelValue","options"]),(0,t.Wm)(w,{modelValue:e.service,"onUpdate:modelValue":l[3]||(l[3]=l=>e.service=l),options:e.services,label:"Service",style:{width:"200px","margin-left":"50px"}},null,8,["modelValue","options"])]),(0,t._)("div",n,[(0,t.Wm)(V,{ref:"dateform",onSubmit:l[8]||(l[8]=l=>e.dataUpdateWithDate())},{default:(0,t.w5)((()=>[(0,t._)("div",u,[(0,t.Wm)(D,{outlined:"",filled:"",mask:"date",modelValue:e.beforeDate,"onUpdate:modelValue":l[5]||(l[5]=l=>e.beforeDate=l),"lazy-rules":"",rules:[l=>l<=e.afterDate||"Field should be earlier than after date"],placeholder:"mm/dd/yy",hint:"Start Date"},{append:(0,t.w5)((()=>[(0,t.Wm)(y,{name:"event",class:"cursor-pointer"},{default:(0,t.w5)((()=>[(0,t.Wm)(h,{ref:"qDateProxy","transition-show":"scale","transition-hide":"scale"},{default:(0,t.w5)((()=>[(0,t.Wm)(g,{modelValue:e.beforeDate,"onUpdate:modelValue":l[4]||(l[4]=l=>e.beforeDate=l)},{default:(0,t.w5)((()=>[(0,t._)("div",r,[(0,t.wy)((0,t.Wm)(b,{label:"Close",color:"primary",flat:""},null,512),[[k]])])])),_:1},8,["modelValue"])])),_:1},512)])),_:1})])),_:1},8,["modelValue","rules"]),(0,t.Wm)(D,{outlined:"",filled:"",mask:"date",modelValue:e.afterDate,"onUpdate:modelValue":l[7]||(l[7]=l=>e.afterDate=l),"lazy-rules":"",rules:[l=>l>=e.beforeDate||"Field should be later than before date"],placeholder:"mm/dd/yy",hint:"End Date",style:{"margin-left":"40px"}},{append:(0,t.w5)((()=>[(0,t.Wm)(y,{name:"event",class:"cursor-pointer"},{default:(0,t.w5)((()=>[(0,t.Wm)(h,{ref:"qDateProxy","transition-show":"scale","transition-hide":"scale"},{default:(0,t.w5)((()=>[(0,t.Wm)(g,{modelValue:e.afterDate,"onUpdate:modelValue":l[6]||(l[6]=l=>e.afterDate=l)},{default:(0,t.w5)((()=>[(0,t._)("div",d,[(0,t.wy)((0,t.Wm)(b,{label:"Close",color:"primary",flat:""},null,512),[[k]])])])),_:1},8,["modelValue"])])),_:1},512)])),_:1})])),_:1},8,["modelValue","rules"])]),(0,t.Wm)(b,{type:"submit",label:"Go",color:"primary",style:{"margin-left":"25px",width:"70px",height:"25px"}})])),_:1},512)])])):(0,t.kq)("",!0),(0,t._)("div",m,[(0,t.Wm)(W,{modelValue:e.mode,"onUpdate:modelValue":l[9]||(l[9]=l=>e.mode=l),inline:"",class:"q-mb-md",options:[{label:"All Negative Feedbacks (default)",value:"All Negative Feedbacks"},{label:"With Action Plan",value:"With Action Plan"},{label:"Without Action Plan",value:"Without Action Plan"}]},null,8,["modelValue","options"]),(0,t.Wm)(q,{class:"my-sticky-header-table",style:{height:"450px"},title:e.mode,rows:e.modeRows,columns:e.cols,pagination:e.pagination,"onUpdate:pagination":l[11]||(l[11]=l=>e.pagination=l),onRequest:e.onRequest,"binary-state-sort":"",separator:"cell"},{"top-right":(0,t.w5)((()=>[(0,t.Wm)(D,{class:"placeholderClass",borderless:"",dense:"",debounce:"300",modelValue:e.filter,"onUpdate:modelValue":l[10]||(l[10]=l=>e.filter=l),placeholder:"Search"},{append:(0,t.w5)((()=>[(0,t.Wm)(y,{class:"searchClass",name:"search"})])),_:1},8,["modelValue"])])),_:1},8,["title","rows","columns","pagination","onRequest"])])],64)}a(10071);var v=a(61959),c=a(26873),f=a(24334),w=a.n(f),b=(a(12841),a(48825)),g=a(11488),h=a.n(g);const y=(0,t.aZ)({name:"Resolutions",setup(){let e;const l=(0,v.iH)([]),a=(0,v.iH)(null),i=(0,v.iH)(null),o=(0,v.iH)([]),s=(0,v.iH)(null),n=(0,v.iH)([]),u=(0,v.iH)("position"),r=(0,v.iH)([]),d=(0,v.iH)(null),m=(0,v.iH)(!1),p=(0,b.Z)();(0,t.YP)(m,((e,l)=>{Z({pagination:y.value,filter:void 0})}));const f=(0,v.iH)("All Negative Feedbacks"),g=(0,v.iH)(null),y=((0,v.iH)(null),(0,v.iH)({sortBy:"desc",descending:!1,page:1,rowsPerPage:20,rowsNumber:5})),D=(0,v.iH)(null),V=(0,v.iH)(null),W=(0,v.iH)([]),q=(0,v.iH)([]),k=(0,v.iH)([]),H=((0,v.Fl)((()=>w()(n.value,u.value))),(0,v.Fl)((()=>{let e=W.value.map((e=>e));switch(f.value){case"All Negative Feedbacks":break;case"With Action Plan":e=e.filter((e=>""!=e.resolution&&null!=e.resolution));break;case"Without Action Plan":e=e.filter((e=>""==e.resolution||null==e.resolution));default:break}return e}))),P=(0,v.iH)([]);function _(){0==k.value.length&&(k.value.push({name:"tsrNo",align:"left",label:"TSR Number",field:"tsrNo"}),k.value.push({name:"division",align:"left",label:"Division",field:"division"}),k.value.push({name:"service",align:"left",label:"Service",field:"service"}),k.value.push({name:"question",align:"left",label:"Question",field:"question"}),k.value.push({name:"value",align:"left",label:"Value",field:"value"}),k.value.push({name:"date",align:"left",label:"Submitted Date",field:"submittedAt"}),k.value.push({name:"remarks",align:"left",label:"Remarks by Customer",field:"remarks"}),k.value.push({name:"resolution",align:"left",label:"Action Plan",field:"resolution"}))}function A(){o.value=a.value.filter((e=>e.division==i.value)).map((e=>e.service))}function x(){}async function F(e,l,a,t,o){let n=[],u=(new Date).getFullYear(),r="",d="";return(i.value||s.value)&&(r=i.value,d=s.value),m.value&&a?n=await(0,c.jR)(a,e,l):(D.value&&V.value||(D.value=new Date("01/01/"+u),V.value=new Date("12/31/"+u)),n=await(0,c.go)(e,l,r,d,D.value,V.value)),n}async function Z(e){const{page:l,rowsPerPage:a,sortBy:t,descending:i}=e.pagination,o=e.filter;let s,n;if(s=g.value?g.value:(new Date).getFullYear(),o){let e=await(0,c.V4)(o);y.value.rowsNumber=e;const s=0===a?e:a,n=(l-1)*a,u=await F(n,s,o,t,i);W.value.splice(0,W.value.length,...u),W.value=W.value.map((e=>({value:e.value,tsrNo:e.tsrNo,division:e.division,service:e.service,submittedAt:h()(e.submittedAt).format("YYYY-MM-DD"),question:e.question,remarks:e.remarks,resolution:e.resolution})))}else{const e=(l-1)*a;y.value.rowsNumber=n;const s=0===a?n:a,u=await F(e,s,o,t,i);W.value.splice(0,W.value.length,...u),W.value=W.value.map((e=>({value:e.value,tsrNo:e.tsr.tsrNo,division:e.tsr.division,service:e.tsr.service,submittedAt:h()(e.tsr.submittedAt).format("YYYY-MM-DD"),question:e.question.description,remarks:e.remarks,resolution:e.resolution})))}y.value.page=l,y.value.rowsPerPage=a,y.value.sortBy=t,y.value.descending=i}function N(){p.loading.show({message:"Please wait for data to be loaded",boxClass:"bg-grey-2 text-grey-9",spinnerColor:"primary"})}function Q(){e=void 0,p.loading.hide()}async function S(){N();let e=await d.value.validate();e&&await Z({pagination:y.value,filter:void 0}),Q()}return(0,t.bv)((async()=>{n.value=await(0,c.ld)(),a.value=await(0,c.nh)(),P.value=[...new Set(a.value.map((e=>e.division)))],_(),x("",""),await Z({pagination:y.value,filter:void 0})})),{divisions:P,allAnswers:l,division:i,services:o,service:s,beforeDate:D,afterDate:V,fillSectionList:A,tsrs:r,dateform:d,rowsWithoutRes:q,rows:W,cols:k,onRequest:Z,pagination:y,mode:f,modeRows:H,showFilter:m,dataUpdateWithDate:S}}});var D=a(28886),V=a(63314),W=a(68689),q=a(64689),k=a(24554),H=a(83944),P=a(76915),_=a(2165),A=a(28758),x=a(17132),F=a(18186),Z=a(83884),N=a(60677),Q=a(7518),S=a.n(Q);y.render=p;const U=y;S()(y,"components",{QToggle:D.Z,QSelect:V.Z,QForm:W.Z,QInput:q.Z,QIcon:k.Z,QPopupProxy:H.Z,QDate:P.Z,QBtn:_.Z,QOptionGroup:A.Z,QTable:x.Z,QTr:F.Z,QTd:Z.Z}),S()(y,"directives",{ClosePopup:N.Z})}}]);