"use strict";(self["webpackChunkcustomersurveysystem3"]=self["webpackChunkcustomersurveysystem3"]||[]).push([[981],{37981:(e,a,l)=>{l.r(a),l.d(a,{default:()=>A});var t=l(83673),o=l(62323);const r=(0,t._)("div",{class:"q-pa-md"},[(0,t._)("h6",null," Please accomplish all of the fields ")],-1),i={class:"q-pa-md",style:{"margin-left":"40px"}},n={class:"row inline"},s={class:"q-pa-md",style:{"margin-left":"40px"}},u={class:"row"},d={class:"row inline"},c={class:"row items-center justify-end"},v={class:"row items-center justify-end"},m=(0,t._)("div",{class:"q-pa-md"},[(0,t._)("p")],-1),f={class:"q-pa-md"},p=(0,t.Uk)(" No. of Respondents "),w=(0,t.Uk)(" No. and % of customers who rated the service as very satisfactory or better "),h=(0,t.Uk)(" No. and % of customers who rated the service as satisfactory or better "),y=(0,t.Uk)(" No. and % of customers who rated the service as Fair or Poor "),g={class:"q-pa-md"};function b(e,a,l,b,_,W){const S=(0,t.up)("q-select"),H=(0,t.up)("q-btn"),D=(0,t.up)("q-date"),k=(0,t.up)("q-popup-proxy"),q=(0,t.up)("q-icon"),V=(0,t.up)("q-input"),x=(0,t.up)("q-form"),U=(0,t.up)("q-td"),C=(0,t.up)("q-tr"),N=(0,t.up)("q-table"),P=(0,t.Q2)("close-popup");return(0,t.wg)(),(0,t.iD)(t.HY,null,[r,(0,t._)("div",i,[(0,t._)("div",n,[(0,t.Wm)(S,{modelValue:e.division,"onUpdate:modelValue":[a[0]||(a[0]=a=>e.division=a),a[1]||(a[1]=a=>e.fillSectionList())],options:e.divisions,label:"Division",style:{width:"200px"}},null,8,["modelValue","options"]),(0,t.Wm)(S,{modelValue:e.service,"onUpdate:modelValue":a[2]||(a[2]=a=>e.service=a),options:e.services,label:"Service",style:{width:"200px","margin-left":"40px"}},null,8,["modelValue","options"])])]),(0,t._)("div",s,[(0,t._)("div",u,[(0,t.Wm)(x,{ref:"dateform",onSubmit:a[7]||(a[7]=a=>e.dataUpdateWithDate())},{default:(0,t.w5)((()=>[(0,t._)("div",d,[(0,t.Wm)(V,{outlined:"",filled:"",mask:"date",modelValue:e.beforeDate,"onUpdate:modelValue":a[4]||(a[4]=a=>e.beforeDate=a),"lazy-rules":"",rules:[a=>a<=e.afterDate||"Field should be earlier than after date"],placeholder:"mm/dd/yy",hint:"Start Date"},{append:(0,t.w5)((()=>[(0,t.Wm)(q,{name:"event",class:"cursor-pointer"},{default:(0,t.w5)((()=>[(0,t.Wm)(k,{ref:"qDateProxy","transition-show":"scale","transition-hide":"scale"},{default:(0,t.w5)((()=>[(0,t.Wm)(D,{modelValue:e.beforeDate,"onUpdate:modelValue":a[3]||(a[3]=a=>e.beforeDate=a)},{default:(0,t.w5)((()=>[(0,t._)("div",c,[(0,t.wy)((0,t.Wm)(H,{label:"Close",color:"primary",flat:""},null,512),[[P]])])])),_:1},8,["modelValue"])])),_:1},512)])),_:1})])),_:1},8,["modelValue","rules"]),(0,t.Wm)(V,{outlined:"",filled:"",mask:"date",modelValue:e.afterDate,"onUpdate:modelValue":a[6]||(a[6]=a=>e.afterDate=a),"lazy-rules":"",rules:[a=>a>=e.beforeDate||"Field should be later than before date"],placeholder:"mm/dd/yy",hint:"End Date",style:{"margin-left":"40px"}},{append:(0,t.w5)((()=>[(0,t.Wm)(q,{name:"event",class:"cursor-pointer"},{default:(0,t.w5)((()=>[(0,t.Wm)(k,{ref:"qDateProxy","transition-show":"scale","transition-hide":"scale"},{default:(0,t.w5)((()=>[(0,t.Wm)(D,{modelValue:e.afterDate,"onUpdate:modelValue":a[5]||(a[5]=a=>e.afterDate=a)},{default:(0,t.w5)((()=>[(0,t._)("div",v,[(0,t.wy)((0,t.Wm)(H,{label:"Close",color:"primary",flat:""},null,512),[[P]])])])),_:1},8,["modelValue"])])),_:1},512)])),_:1})])),_:1},8,["modelValue","rules"]),(0,t.Wm)(H,{type:"submit",label:"Go",color:"primary",style:{"margin-left":"25px",width:"70px",height:"25px"}})])])),_:1},512)])]),m,(0,t._)("div",f,[e.rowsOverall?((0,t.wg)(),(0,t.j4)(N,{key:0,class:"my-sticky-header-table",title:"Summary of Citizen/Client Satisfaction Survey CCSS Rating",rows:e.rowsOverall,columns:e.colsOverall,"row-key":"name",loading:e.loading,"binary-state-sort":"",separator:"cell",style:{height:"700px"},"rows-per-page-options":[0]},{"top-row":(0,t.w5)((()=>[(0,t.Wm)(C,null,{default:(0,t.w5)((()=>[(0,t.Wm)(U,{colspan:"100%"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.division),1)])),_:1})])),_:1}),(0,t.Wm)(C,null,{default:(0,t.w5)((()=>[(0,t.Wm)(U,{colspan:"100%"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.service),1)])),_:1})])),_:1})])),"bottom-row":(0,t.w5)((()=>[(0,t.Wm)(C,null,{default:(0,t.w5)((()=>[(0,t.Wm)(U,null,{default:(0,t.w5)((()=>[p])),_:1}),(0,t.Wm)(U,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.noRespondents),1)])),_:1})])),_:1}),(0,t.Wm)(C,null,{default:(0,t.w5)((()=>[(0,t.Wm)(U,null,{default:(0,t.w5)((()=>[w])),_:1}),(0,t.Wm)(U,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.noVerySatisfactory),1)])),_:1})])),_:1}),(0,t.Wm)(C,null,{default:(0,t.w5)((()=>[(0,t.Wm)(U,null,{default:(0,t.w5)((()=>[h])),_:1}),(0,t.Wm)(U,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.noSatisfactory),1)])),_:1})])),_:1}),(0,t.Wm)(C,null,{default:(0,t.w5)((()=>[(0,t.Wm)(U,null,{default:(0,t.w5)((()=>[y])),_:1}),(0,t.Wm)(U,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.noPoor),1)])),_:1})])),_:1})])),_:1},8,["rows","columns","loading"])):(0,t.kq)("",!0)]),(0,t._)("div",g,[(0,t.Wm)(N,{class:"my-sticky-header-table",title:"Total Summary of Citizen/Client Satisfaction Survey CCSS Rating",rows:e.rowsTotal,columns:e.colsTotal,"row-key":"name","binary-state-sort":"",separator:"cell",style:{height:"350px"},"rows-per-page-options":[0]},null,8,["rows","columns"])])],64)}l(10071),l(90246);var _=l(61959),W=l(26873),S=l(24334),H=l.n(S),D=l(74798),k=l.n(D),q=l(48825);const V=(0,t.aZ)({name:"AdminDivision",setup(){const e=(0,_.iH)(null),a=(0,_.iH)(null),l=(0,_.iH)([]),o=(0,_.iH)(null),r=(0,_.iH)([]),i=(0,_.iH)("position"),n=(0,_.iH)([]),s=(0,_.iH)(null),u=(0,q.Z)();let d;const c=(0,_.iH)([]),v=(0,_.iH)([{name:"Area",align:"left",label:"Area",field:"area",sortable:!0},{name:"Number",align:"left",label:"Number",field:"number",sortable:!0},{name:"Percentage",align:"left",label:"Percentage",field:"percentage",sortable:!0}]),m=(0,_.Fl)((()=>H()(r.value,i.value))),f=(0,_.iH)([]),p=(0,_.iH)([]),w=(0,_.iH)([]),h=(0,_.iH)(!1),y=(0,_.iH)(null),g=(0,_.iH)(null),b=(0,_.iH)(0),S=(0,_.iH)(0),D=(0,_.iH)(0),V=(0,_.iH)(0),x=(0,_.iH)(0),U=(0,_.iH)(0),C=(0,_.iH)(0),N=(0,_.iH)(0),P=(0,_.iH)(0);async function Z(){b.value=0,S.value=0,D.value=0,V.value=0,x.value=0;for(let e=0;e<m.value.length;e++){let l=await(0,W.HL)(a.value,o.value,m.value[e].id,y.value,g.value);if(0!=l.length){l=l.map((e=>e.value)),l=l.map((function(e){return parseInt(e,10)}));const a={5:0,4:0,3:0,2:0,1:0,0:0};for(const t of l)12==m.value[e].id&&(V.value+=1,5==t||4==t?S.value+=1:3==t?D.value+=1:t<=2?b.value+=1:x.value+=1),1==t?a[1]+=1:2==t?a[2]+=1:isNaN(t)?a[0]+=1:a[t]=a[t]?a[t]+1:1;for(let[t,o]of Object.entries(a))w.value.forEach((function(a){t==a.id&&(o=(o/l.length*100).toFixed(2),o=isNaN(o)?"0%":o.toString()+"%",a[m.value[e].id]=o)}))}}}function z(){u.loading.show({message:"Please wait for data to be loaded",boxClass:"bg-grey-2 text-grey-9",spinnerColor:"primary"})}function Q(){d=void 0,u.loading.hide()}async function F(){z();let e=await s.value.validate();e&&(await Z(),await M(g.value)),Q()}function O(){l.value=e.value.filter((e=>e.division==a.value)).map((e=>e.service))}function T(){p.value.push({name:"serviceArea",align:"left",label:"Service Area/Rating",field:"servicearea",sortable:!0});for(let e=0;e<m.value.length;e++)if(5!=m.value[e].question_type){let a={name:"",align:"left",label:"",field:"",sortable:!0};a.name=m.value[e].description,a.label=m.value[e].description,a.field=m.value[e].id,2==m.value[e].question_type&&p.value.push(a)}R()}function R(){w.value.push({servicearea:"5 - Outstanding",id:5}),w.value.push({servicearea:"4 - Very Satisfactory",id:4}),w.value.push({servicearea:"3 - Satisfactory",id:3}),w.value.push({servicearea:"2 - Fair",id:2}),w.value.push({servicearea:"1 - Poor",id:1}),w.value.push({servicearea:"No Response",id:0}),p.value.forEach((function(e){}))}async function M(e){let a;a=e?k()(new Date(e)).year():k()(new Date).year();let l=[];for(let t=0;t<12;t++){let e=await(0,W.z3)(t,a);e.forEach((e=>{l.push(e)}))}C.value=0,N.value=0,U.value=0,P.value=0,l=l.map((e=>e.value)),l.forEach((e=>{e>=4?C.value+=1:3==e?N.value+=1:""==e?P.value+=1:U.value+=1})),0==c.value.length?(c.value.push({area:"No. and % of customers who rated the Center's service as very satisfactory or better",number:C,percentage:Math.round(C.value/l.length*100).toString()+"%"}),c.value.push({area:"No. and % of customers who rated the Center's service as satisfactory or better",number:N,percentage:Math.round(N.value/l.length*100).toString()+"%"}),c.value.push({area:"No. and % of customers who rated the service as Fair or Poor",number:U,percentage:Math.round(U.value/l.length*100).toString()+"%"})):(c.value[0].percentage=Math.round(C.value/l.length*100).toString()+"%",c.value[1].percentage=Math.round(N.value/l.length*100).toString()+"%",c.value[2].percentage=Math.round(U.value/l.length*100).toString()+"%")}return(0,t.bv)((async()=>{r.value=await(0,W.ld)(),e.value=await(0,W.nh)(),f.value=[...new Set(e.value.map((e=>e.division)))],T(),M("","")})),{divisions:f,division:a,services:l,service:o,rowsOverall:w,colsOverall:p,loading:h,beforeDate:y,afterDate:g,noPoor:b,noVerySatisfactory:S,noSatisfactory:D,noRespondents:V,fillSectionList:O,tsrs:n,dateform:s,rowsTotal:c,colsTotal:v,noNoOverall:x,dataUpdateWithDate:F}}});var x=l(63314),U=l(68689),C=l(64689),N=l(24554),P=l(83944),Z=l(85836),z=l(2165),Q=l(17132),F=l(18186),O=l(83884),T=l(60677),R=l(7518),M=l.n(R);V.render=b;const A=V;M()(V,"components",{QSelect:x.Z,QForm:U.Z,QInput:C.Z,QIcon:N.Z,QPopupProxy:P.Z,QDate:Z.Z,QBtn:z.Z,QTable:Q.Z,QTr:F.Z,QTd:O.Z}),M()(V,"directives",{ClosePopup:T.Z})}}]);